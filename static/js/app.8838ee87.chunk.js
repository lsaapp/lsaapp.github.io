(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{293:function(e,t,n){e.exports=n.p+"static/media/logo-transparent.2167c3eb.png"},352:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return pe}));var r=n(32),o=n.n(r),a=n(18),c=n.n(a),i=n(4),l=n.n(i),s=n(0),u=n.n(s),f=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function d(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var p=n(12),j=n(299),b=n(199),h=n(162),g=u.a.createContext({signOut:function(){},signIn:function(){},userToken:""}),O=n(14),v=n.n(O),y=(n(370),n(117)),m=n(200),x=n(559),S=n(2),w=n(38),T=n(109),I=n(3),P=n(320),C=n.n(P),k=n(268),E=n(209),D=[{name:"LifeStyle Apparel Pvt. Ltd.",baseUrl:"https://bc.lifestyleapparels.com.np:9048",instance:"/BC170",url1:"/Odatav4",url2:"/api/datahub/bz/v2.0"},{name:"Lavida Trading Pvt. Ltd.",baseUrl:"https://bc.lifestyleapparels.com.np:9248",instance:"/lsa2",url1:"/Odatav4",url2:"/api/datahub/bz/v2.0"}],L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",A={btoa:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t,r="",o=0,a=0,c=L;n.charAt(0|a)||(c="=",a%1);r+=c.charAt(63&o>>8-a%1*8)){if((e=n.charCodeAt(a+=3/4))>255)throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");o=o<<8|e}return r},atob:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace(/[=]+$/,""),n="";if(t.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o=0,a=0,c=0;r=t.charAt(c++);~r&&(a=o%4?64*a+r:r,o++%4)?n+=String.fromCharCode(255&a>>(-2*o&6)):0)r=L.indexOf(r);return n}},N=n(570);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(){var e=o()((function*(e,t){var n={};try{var r,o,a;if(r=e||JSON.parse(yield h.default.getItem("userToken")))n={Authorization:"Basic "+A.btoa((null==(o=r)?void 0:o.username)+":"+(null==(a=r)?void 0:a.password))}}catch(c){}return console.log(n),n=z(z({},n),{},t?{"Content-Type":"multipart/form-data",Accept:"multipart/form-data"}:{"Content-Type":"application/json"})}));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=o()((function*(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,i=yield R(r),l={baseURL:t,url:n,method:e,headers:i,data:o,params:a,onUploadProgress:c,transformRequest:[function(e,t){return o}]};return o||delete l.data,a||delete l.params,c||delete l.onUploadProgress,console.log(l),Object(N.default)(l)}));return function(t,n,r){return e.apply(this,arguments)}}(),_="#ffffff",W="#22B516",F="#FF6B37",J="#9e9e9e",q="#f44336";function G(e){var t=e.getDate(),n=e.getMonth()+1;return e.getFullYear()+"-"+(n<=9?"0"+n:n)+"-"+(t<=9?"0"+t:t)}var V=n(21);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var K,$=function(){var e=Object(s.useState)([]),t=c()(e,2),n=t[0],r=t[1],a=Object(s.useState)(!1),i=c()(a,2),u=i[0],f=i[1],d=Object(s.useState)(null),p=c()(d,2),j=p[0],b=p[1],h=Object(s.useState)([]),g=c()(h,2),O=g[0],S=g[1],P=Object(s.useState)(!1),L=c()(P,2),A=L[0],N=L[1],U=Object(s.useState)(""),z=c()(U,2),R=z[0],_=z[1],F=Object(s.useState)([]),q=c()(F,2),K=(q[0],q[1]),$=Object(s.useState)(null),Q=c()($,2),Y=Q[0],X=Q[1],Z=Object(s.useState)(null),ee=c()(Z,2),te=ee[0],ne=ee[1],re=Object(s.useState)(null),oe=c()(re,2),ae=oe[0],ce=oe[1],ie=Object(s.useState)(new Date),le=c()(ie,2),se=le[0],ue=le[1],fe=Object(s.useState)(!1),de=c()(fe,2),pe=(de[0],de[1],Object(s.useState)("")),je=c()(pe,2),be=je[0],he=je[1],ge=Object(s.useState)(!1),Oe=c()(ge,2),ve=Oe[0],ye=Oe[1];return Object(s.useEffect)((function(){var e=function(){var e=o()((function*(){ye(!0);var e=n.find((function(e){return e.id===j})),t=e.baseUrl,r=e.instance,o=e.url2;B("get",""+t+r+o,"/companies("+j+")/ValueEntries?$filter=locationCode eq '"+R+"' and postingDate eq "+be,null).then((function(e){if(ye(!1),console.log(e),e.data.value){K(e.data.value);var t=e.data.value.filter((function(e){return"Sales Invoice"===e.documentType}));X(new Set(t.map((function(e){return e.documentNo}))).size),ne(e.data.value.reduce((function(e,t){return e+-1*t.invoicedQty}),0)),ce(e.data.value.reduce((function(e,t){return e+t.salesAmountActual}),0).toFixed(2))}else K([]),X(0),ne(0),ce(0)})).catch((function(e){console.log(e),ye(!1)}))}));return function(){return e.apply(this,arguments)}}();j&&R&&be&&e(),console.log("object",j,R,be)}),[j,R,be]),Object(s.useEffect)((function(){var e=function(){var e=o()((function*(){ye(!0);var e=n.find((function(e){return e.id===j}));console.log("first",e,j,j);var t=e.baseUrl,r=e.instance,o=e.url1;B("get",""+t+r+o,"/Company('"+j+"')/locationList?$filter=Use_As_In_Transit eq false",null).then((function(e){ye(!1),console.log(e),S(e.data.value.map((function(e){var t=e.Name,n=e.Code;return{label:t||n,value:n}})))})).catch((function(e){console.log(e),ye(!1)}))}));return function(){return e.apply(this,arguments)}}();j&&e()}),[j]),Object(s.useEffect)((function(){j&&R&&(be||he(G(new Date))),console.log(j,R)}),[j,R]),Object(s.useEffect)((function(){(function(){var e=o()((function*(){ye(!0),D.forEach((function(e){var t=e.baseUrl,n=e.instance,o=e.url1;B("get",""+t+n+o,"/Company",null).then((function(t){ye(!1),r((function(n){var r=t.data.value.map((function(t){var n=t.Id,r=(t.Name,t.Display_Name);t.Business_Profile_Id;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:n,label:r,value:n},e)}));return[].concat(v()(n),v()(r))}))})).catch((function(e){console.log(e),ye(!1)}))}))}));return function(){return e.apply(this,arguments)}})()()}),[]),Object(s.useEffect)((function(){var e=n.find((function(e){return e.value===j}))||{id:""};console.log(e,"company",n,j),b(null==e?void 0:e.id)}),[j]),Object(s.useEffect)((function(){he(G(se))}),[se]),Object(V.jsxs)(I.default,{children:[Object(V.jsxs)(E.Helmet,{children:[Object(V.jsx)("meta",{charSet:"utf-8",name:"title",content:"LSA"}),Object(V.jsx)("title",{children:"LSA app"})]}),Object(V.jsxs)(I.default,{style:M.filtersContainer,children:[Object(V.jsx)(k.default,{zIndex:3e3,zIndexInverse:1e3,style:M.dropDown,placeholder:"Select Company",placeholderStyle:{color:J},open:u,onOpen:function(){return N(!1)},value:j,items:n,setOpen:f,setValue:b}),Object(V.jsx)(k.default,{zIndex:2e3,zIndexInverse:2e3,style:M.dropDown,placeholder:"Select Location",placeholderStyle:{color:J},onOpen:function(){return f(!1)},open:A,value:R,items:O,setOpen:N,setValue:_}),Object(V.jsxs)(T.default,{style:{flexDirection:"row",justifyContent:"space-between",padding:5},children:[Object(V.jsx)(I.default,{style:{marginLeft:10},children:Object(V.jsx)(w.default,{style:{fontSize:12,marginBottom:5,color:J},children:"Select Date"})}),Object(V.jsx)(I.default,{style:{},children:Object(V.jsx)(C.a,{selected:se,onChange:function(e){console.log(e),ue(e)}})})]})]}),ve?Object(V.jsx)(y.default,{color:W}):null,te&&ae&&Y?Object(V.jsxs)(I.default,{style:M.contentContainer,children:[Object(V.jsxs)(m.default,{style:{marginTop:8},children:[Object(V.jsx)(m.default.Title,{title:"Sales Qty"}),Object(V.jsx)(m.default.Content,{children:Object(V.jsx)(x.default,{children:te})})]}),Object(V.jsxs)(m.default,{style:{marginTop:8},children:[Object(V.jsx)(m.default.Title,{title:"Sales Value"}),Object(V.jsx)(m.default.Content,{children:Object(V.jsxs)(x.default,{children:["NPR. ",ae]})})]}),Object(V.jsxs)(m.default,{style:{marginTop:8},children:[Object(V.jsx)(m.default.Title,{title:"Total Transactions"}),Object(V.jsx)(m.default.Content,{children:Object(V.jsxs)(x.default,{children:[" ",Y]})})]})]}):Object(V.jsx)(w.default,{style:{textAlign:"center",marginTop:50,color:J},children:"No data found"})]})},M=S.default.create({filtersContainer:{padding:15,zIndex:1e3},filterStyle:{flex:1,margin:5},dropDown:{marginBottom:10,zIndex:2,borderColor:J},contentContainer:{marginTop:30,justifyContent:"center",padding:10,zIndex:2}}),Q=n(51),Y=n(208),X=n(330),Z=n(298),ee=n(234);var te=function(){var e=u.a.useState(""),t=c()(e,2),r=t[0],o=t[1],a=u.a.useState(""),i=c()(a,2),l=i[0],f=i[1],d=u.a.useState(!1),p=c()(d,2),j=p[0],b=p[1],h=u.a.useState(""),O=c()(h,2),v=O[0],y=O[1],m=u.a.useState(!1),x=c()(m,2),S=x[0],T=x[1],P=u.a.useContext(g).signIn;return Object(s.useEffect)((function(){return function(){clearTimeout(K)}}),[]),Object(V.jsxs)(X.default,{source:n(527),blurRadius:30,style:ne.container,children:[Object(V.jsxs)(E.Helmet,{children:[Object(V.jsx)("meta",{charSet:"utf-8",name:"title",content:"LSA"}),Object(V.jsx)("title",{children:"LSA app"})]}),Object(V.jsx)(I.default,{style:ne.center,children:Object(V.jsx)(Q.default,{source:n(293),style:{height:180,width:180}})}),Object(V.jsxs)(I.default,{style:{marginTop:20,alignItems:"center"},children:[Object(V.jsx)(Z.default,{style:ne.loginInput,mode:"flat",label:"Username",value:r,onChangeText:function(e){return o(e)}}),Object(V.jsx)(Z.default,{style:ne.loginInput,mode:"flat",label:"Password",value:l,onChangeText:function(e){return f(e)},secureTextEntry:!j,right:Object(V.jsx)(Z.default.Icon,{name:"eye",onPress:function(){return b(!j)}})})]}),Object(V.jsxs)(I.default,{style:ne.center,children:[Object(V.jsx)(w.default,{style:{marginTop:10,color:q},children:v}),Object(V.jsx)(ee.TouchableOpacity,{onPress:function(){y(""),T(!0),K=setTimeout((function(){var e=D[0],t=e.baseUrl,n=e.instance,o=e.url1;B("get",""+t+n+o,"/Company",{username:r,password:l}).then((function(){T(!1),P({username:r,password:l})})).catch((function(){y("Invalid username or password"),T(!1)}))}),200)},style:ne.signInButtonContainer,children:S?Object(V.jsx)(I.default,{style:ne.signInText,children:Object(V.jsx)(Y.default,{color:_})}):Object(V.jsx)(w.default,{style:ne.signInText,children:"Sign In"})})]})]})},ne=S.default.create({container:{flex:1,justifyContent:"center",backgroundColor:_,padding:10},center:{justifyContent:"center",alignItems:"center"},loginInput:{marginTop:5,padding:5,width:300,height:50,borderRadius:10,backgroundColor:_},signInButtonContainer:{backgroundColor:F,justifyContent:"center",alignItems:"center",marginTop:20,borderRadius:4,width:300},signInText:{color:"white",padding:10,fontSize:18}}),re=n(567);var oe=function(){return Object(V.jsx)(I.default,{style:ae.container,children:Object(V.jsx)(w.default,{children:"Loading..."})})},ae=S.default.create({container:{flex:1}}),ce=n(336),ie="web"===n(11).default.OS?function(e,t,n,r){if(window.confirm([e,t].filter(Boolean).join("\n"))){var o=n.find((function(e){return"cancel"!==e.style}));o&&o.onPress()}else{var a=n.find((function(e){return"cancel"===e.style}));a&&a.onPress()}}:ce.default.alert,le=n(560);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe=Object(le.default)(),de=ue(ue({},p.DefaultTheme),{},{roundness:2,colors:ue(ue({},p.DefaultTheme.colors),{},{primary:W,accent:F,background:_})});function pe(){var e=s.useReducer((function(e,t){switch(t.type){case"RESTORE_TOKEN":return ue(ue({},e),{},{userToken:t.token,isLoading:!1});case"SIGN_IN":return ue(ue({},e),{},{isSignout:!1,userToken:t.token});case"SIGN_OUT":return ue(ue({},e),{},{isSignout:!0,userToken:null})}}),{isLoading:!0,isSignout:!1,userToken:null}),t=c()(e,2),r=t[0],a=t[1];s.useEffect((function(){(function(){var e=o()((function*(){var e;try{e=yield h.default.getItem("userToken")}catch(t){}a({type:"RESTORE_TOKEN",token:e})}));return function(){return e.apply(this,arguments)}})()()}),[]);var i=s.useMemo((function(){return{signIn:function(){var e=o()((function*(e){yield h.default.setItem("userToken",JSON.stringify(e)),a({type:"SIGN_IN",token:JSON.stringify(e)})}));return function(t){return e.apply(this,arguments)}}(),signOut:function(){var e=o()((function*(){console.log("testsss"),yield h.default.removeItem("userToken"),a({type:"SIGN_OUT"})}));return function(){return e.apply(this,arguments)}}(),userToken:r.userToken}}),[r]);return Object(V.jsx)(g.Provider,{value:i,children:Object(V.jsx)(j.default,{theme:de,children:Object(V.jsx)(re.default,{documentTitle:{formatter:function(e,t){var n;return(null!=(n=null==e?void 0:e.title)?n:null==t?void 0:t.name)+" - LSA"}},children:Object(V.jsx)(fe.Navigator,{children:r.isLoading?Object(V.jsx)(fe.Screen,{name:"Splash",component:oe,options:{header:function(){return null}}}):null==r.userToken?Object(V.jsx)(fe.Screen,{name:"SignIn",component:te,options:{header:function(){return null},animationTypeForReplace:r.isSignout?"pop":"push"}}):Object(V.jsx)(fe.Screen,{name:"Home",component:$,options:{headerTintColor:F,headerLeft:function(){return Object(V.jsx)(Q.default,{source:n(293),style:{width:40,height:40,margin:5}})},headerRight:function(){return Object(V.jsx)(ee.TouchableOpacity,{onPress:function(){ie("Logout","Are you sure you want to logout?",[{text:"Cancel",onPress:function(){return console.log("Cancel Pressed")},style:"cancel"},{text:"OK",onPress:function(){console.log("first"),i.signOut()}}])},children:Object(V.jsx)(b.Avatar.Icon,{size:30,icon:"logout",style:{marginLeft:10,margin:10}})})}}})})})})})}!function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="/service-worker.js";f?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):d(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):d(t,e)}))}}()},360:function(e,t,n){e.exports=n(545)},527:function(e,t,n){e.exports=n.p+"static/media/logo1.f31eaf93.jpg"}},[[360,1,2]]]);
//# sourceMappingURL=app.8838ee87.chunk.js.map