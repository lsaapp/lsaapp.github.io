(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{293:function(e,t,n){e.exports=n.p+"static/media/logo-transparent.2167c3eb.png"},353:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ue}));var r=n(32),o=n.n(r),c=n(18),a=n.n(c),i=n(4),l=n.n(i),u=n(0),s=n.n(u),f=n(12),d=n(299),j=n(199),p=n(162),b=s.a.createContext({signOut:function(){},signIn:function(){},userToken:""}),O=(n(367),n(117)),h=n(200),g=n(559),y=n(2),m=n(38),x=n(109),v=n(3),S=n(320),T=n.n(S),I=n(268),w=n(209),C="http://182.93.84.51:9248/lsa2/api/datahub/bz/v2.0",P="http://182.93.84.51:9248/lsa2/ODataV4/",k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",E={btoa:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t,r="",o=0,c=0,a=k;n.charAt(0|c)||(a="=",c%1);r+=a.charAt(63&o>>8-c%1*8)){if((e=n.charCodeAt(c+=3/4))>255)throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");o=o<<8|e}return r},atob:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace(/[=]+$/,""),n="";if(t.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o=0,c=0,a=0;r=t.charAt(a++);~r&&(c=o%4?64*c+r:r,o++%4)?n+=String.fromCharCode(255&c>>(-2*o&6)):0)r=k.indexOf(r);return n}},D=n(570);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(){var e=o()((function*(e,t){var n={};try{var r,o,c;if(r=e||JSON.parse(yield p.default.getItem("userToken")))n={Authorization:"Basic "+E.btoa((null==(o=r)?void 0:o.username)+":"+(null==(c=r)?void 0:c.password))}}catch(a){}return console.log(n),n=A(A({},n),{},t?{"Content-Type":"multipart/form-data",Accept:"multipart/form-data"}:{"Content-Type":"application/json"})}));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=o()((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,i=yield L(n),l={baseURL:r?P:C,url:t,method:e,headers:i,data:o,params:c,onUploadProgress:a,transformRequest:[function(e,t){return o}]};return o||delete l.data,c||delete l.params,a||delete l.onUploadProgress,Object(D.default)(l)}));return function(t,n){return e.apply(this,arguments)}}(),R="#ffffff",B="#22B516",_="#FF6B37",U="#9e9e9e",F="#f44336";function J(e){var t=e.getDate(),n=e.getMonth()+1;return e.getFullYear()+"-"+(n<=9?"0"+n:n)+"-"+(t<=9?"0"+t:t)}var V,q=n(21),G=function(){var e=Object(u.useState)([]),t=a()(e,2),n=t[0],r=t[1],c=Object(u.useState)(!1),i=a()(c,2),l=i[0],s=i[1],f=Object(u.useState)(null),d=a()(f,2),j=d[0],p=d[1],b=Object(u.useState)(""),y=a()(b,2),S=y[0],C=y[1],P=Object(u.useState)([]),k=a()(P,2),E=k[0],D=k[1],N=Object(u.useState)(!1),A=a()(N,2),L=A[0],R=A[1],_=Object(u.useState)(""),F=a()(_,2),V=F[0],G=F[1],K=Object(u.useState)([]),M=a()(K,2),Q=(M[0],M[1]),$=Object(u.useState)(null),Y=a()($,2),W=Y[0],X=Y[1],Z=Object(u.useState)(null),ee=a()(Z,2),te=ee[0],ne=ee[1],re=Object(u.useState)(null),oe=a()(re,2),ce=oe[0],ae=oe[1],ie=Object(u.useState)(new Date),le=a()(ie,2),ue=le[0],se=le[1],fe=Object(u.useState)(!1),de=a()(fe,2),je=(de[0],de[1],Object(u.useState)("")),pe=a()(je,2),be=pe[0],Oe=pe[1],he=Object(u.useState)(!1),ge=a()(he,2),ye=ge[0],me=ge[1];return Object(u.useEffect)((function(){var e=function(){var e=o()((function*(){me(!0),z("get","/companies("+S+")/ValueEntries?$filter=locationCode eq '"+V+"' and postingDate eq "+be,null,!1).then((function(e){if(me(!1),console.log(e),e.data.value){Q(e.data.value);var t=e.data.value.filter((function(e){return"Sales Invoice"===e.documentType}));X(new Set(t.map((function(e){return e.documentNo}))).size),ne(e.data.value.reduce((function(e,t){return e+-1*t.invoicedQty}),0)),ae(e.data.value.reduce((function(e,t){return e+t.salesAmountActual}),0).toFixed(2))}else Q([]),X(0),ne(0),ae(0)})).catch((function(e){console.log(e),me(!1)}))}));return function(){return e.apply(this,arguments)}}();S&&V&&be&&e(),console.log("object",S,V,be)}),[S,V,be]),Object(u.useEffect)((function(){var e=function(){var e=o()((function*(){me(!0),z("get","/Company('"+j+"')/locationList?$filter=Use_As_In_Transit eq false",null,!0).then((function(e){me(!1),console.log(e),D(e.data.value.map((function(e){return{label:e.Name,value:e.Code}})))})).catch((function(e){console.log(e),me(!1)}))}));return function(){return e.apply(this,arguments)}}();j&&e()}),[j]),Object(u.useEffect)((function(){S&&V&&(be||Oe(J(new Date))),console.log(S,V)}),[S,V]),Object(u.useEffect)((function(){(function(){var e=o()((function*(){me(!0),z("get","/companies",null,!1).then((function(e){me(!1),console.log(e),r(e.data.value.map((function(e){var t=e.id,n=e.name,r=e.displayName;return{id:t,businessProfileId:e.businessProfileId,label:r,value:n}})))})).catch((function(e){console.log(e),me(!1)}))}));return function(){return e.apply(this,arguments)}})()()}),[]),Object(u.useEffect)((function(){var e=n.find((function(e){return e.value===j}))||{id:""};console.log(e,"company",n,j),C(null==e?void 0:e.id)}),[j]),Object(u.useEffect)((function(){Oe(J(ue))}),[ue]),Object(q.jsxs)(v.default,{children:[Object(q.jsxs)(w.Helmet,{children:[Object(q.jsx)("meta",{charSet:"utf-8",name:"title",content:"LSA"}),Object(q.jsx)("title",{children:"LSA app"})]}),Object(q.jsxs)(v.default,{style:H.filtersContainer,children:[Object(q.jsx)(I.default,{zIndex:3e3,zIndexInverse:1e3,style:H.dropDown,placeholder:"Select Company",placeholderStyle:{color:U},open:l,onOpen:function(){return R(!1)},value:j,items:n,setOpen:s,setValue:p}),Object(q.jsx)(I.default,{zIndex:2e3,zIndexInverse:2e3,style:H.dropDown,placeholder:"Select Location",placeholderStyle:{color:U},onOpen:function(){return s(!1)},open:L,value:V,items:E,setOpen:R,setValue:G}),Object(q.jsxs)(x.default,{style:{flexDirection:"row",justifyContent:"space-between",padding:5},children:[Object(q.jsx)(v.default,{style:{marginLeft:10},children:Object(q.jsx)(m.default,{style:{fontSize:12,marginBottom:5,color:U},children:"Select Date"})}),Object(q.jsx)(v.default,{style:{},children:Object(q.jsx)(T.a,{selected:ue,onChange:function(e){console.log(e),se(e)}})})]})]}),ye?Object(q.jsx)(O.default,{color:B}):null,te&&ce&&W?Object(q.jsxs)(v.default,{style:H.contentContainer,children:[Object(q.jsxs)(h.default,{style:{marginTop:8},children:[Object(q.jsx)(h.default.Title,{title:"Sales Qty"}),Object(q.jsx)(h.default.Content,{children:Object(q.jsx)(g.default,{children:te})})]}),Object(q.jsxs)(h.default,{style:{marginTop:8},children:[Object(q.jsx)(h.default.Title,{title:"Sales Value"}),Object(q.jsx)(h.default.Content,{children:Object(q.jsxs)(g.default,{children:["NPR. ",ce]})})]}),Object(q.jsxs)(h.default,{style:{marginTop:8},children:[Object(q.jsx)(h.default.Title,{title:"Total Transactions"}),Object(q.jsx)(h.default.Content,{children:Object(q.jsxs)(g.default,{children:[" ",W]})})]})]}):Object(q.jsx)(m.default,{style:{textAlign:"center",marginTop:50,color:U},children:"No data found"})]})},H=y.default.create({filtersContainer:{padding:15,zIndex:1e3},filterStyle:{flex:1,margin:5},dropDown:{marginBottom:10,zIndex:2,borderColor:U},contentContainer:{marginTop:30,justifyContent:"center",padding:10,zIndex:2}}),K=n(51),M=n(208),Q=n(330),$=n(298),Y=n(234);var W=function(){var e=s.a.useState(""),t=a()(e,2),r=t[0],o=t[1],c=s.a.useState(""),i=a()(c,2),l=i[0],f=i[1],d=s.a.useState(!1),j=a()(d,2),p=j[0],O=j[1],h=s.a.useState(""),g=a()(h,2),y=g[0],x=g[1],S=s.a.useState(!1),T=a()(S,2),I=T[0],C=T[1],P=s.a.useContext(b).signIn;return Object(u.useEffect)((function(){return function(){clearTimeout(V)}}),[]),Object(q.jsxs)(Q.default,{source:n(527),blurRadius:30,style:X.container,children:[Object(q.jsxs)(w.Helmet,{children:[Object(q.jsx)("meta",{charSet:"utf-8",name:"title",content:"LSA"}),Object(q.jsx)("title",{children:"LSA app"})]}),Object(q.jsx)(v.default,{style:X.center,children:Object(q.jsx)(K.default,{source:n(293),style:{height:180,width:180}})}),Object(q.jsxs)(v.default,{style:{marginTop:20,alignItems:"center"},children:[Object(q.jsx)($.default,{style:X.loginInput,mode:"flat",label:"Username",value:r,onChangeText:function(e){return o(e)}}),Object(q.jsx)($.default,{style:X.loginInput,mode:"flat",label:"Password",value:l,onChangeText:function(e){return f(e)},secureTextEntry:!p,right:Object(q.jsx)($.default.Icon,{name:"eye",onPress:function(){return O(!p)}})})]}),Object(q.jsxs)(v.default,{style:X.center,children:[Object(q.jsx)(m.default,{style:{marginTop:10,color:F},children:y}),Object(q.jsx)(Y.TouchableOpacity,{onPress:function(){x(""),C(!0),V=setTimeout((function(){z("get","/companies",{username:r,password:l},!1).then((function(){C(!1),P({username:r,password:l})})).catch((function(){x("Invalid username or password"),C(!1)}))}),200)},style:X.signInButtonContainer,children:I?Object(q.jsx)(v.default,{style:X.signInText,children:Object(q.jsx)(M.default,{color:R})}):Object(q.jsx)(m.default,{style:X.signInText,children:"Sign In"})})]})]})},X=y.default.create({container:{flex:1,justifyContent:"center",backgroundColor:R,padding:10},center:{justifyContent:"center",alignItems:"center"},loginInput:{marginTop:5,padding:5,width:300,height:50,borderRadius:10,backgroundColor:R},signInButtonContainer:{backgroundColor:_,justifyContent:"center",alignItems:"center",marginTop:20,borderRadius:4,width:300},signInText:{color:"white",padding:10,fontSize:18}}),Z=n(567);var ee=function(){return Object(q.jsx)(v.default,{style:te.container,children:Object(q.jsx)(m.default,{children:"Loading..."})})},te=y.default.create({container:{flex:1}}),ne=n(336),re="web"===n(11).default.OS?function(e,t,n,r){if(window.confirm([e,t].filter(Boolean).join("\n"))){var o=n.find((function(e){return"cancel"!==e.style}));o&&o.onPress()}else{var c=n.find((function(e){return"cancel"===e.style}));c&&c.onPress()}}:ne.default.alert,oe=n(560);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=Object(oe.default)(),le=ae(ae({},f.DefaultTheme),{},{roundness:2,colors:ae(ae({},f.DefaultTheme.colors),{},{primary:B,accent:_,background:R})});function ue(){var e=u.useReducer((function(e,t){switch(t.type){case"RESTORE_TOKEN":return ae(ae({},e),{},{userToken:t.token,isLoading:!1});case"SIGN_IN":return ae(ae({},e),{},{isSignout:!1,userToken:t.token});case"SIGN_OUT":return ae(ae({},e),{},{isSignout:!0,userToken:null})}}),{isLoading:!0,isSignout:!1,userToken:null}),t=a()(e,2),r=t[0],c=t[1];u.useEffect((function(){(function(){var e=o()((function*(){var e;try{e=yield p.default.getItem("userToken")}catch(t){}c({type:"RESTORE_TOKEN",token:e})}));return function(){return e.apply(this,arguments)}})()()}),[]);var i=u.useMemo((function(){return{signIn:function(){var e=o()((function*(e){yield p.default.setItem("userToken",JSON.stringify(e)),c({type:"SIGN_IN",token:JSON.stringify(e)})}));return function(t){return e.apply(this,arguments)}}(),signOut:function(){var e=o()((function*(){console.log("testsss"),yield p.default.removeItem("userToken"),c({type:"SIGN_OUT"})}));return function(){return e.apply(this,arguments)}}(),userToken:r.userToken}}),[r]);return Object(q.jsx)(b.Provider,{value:i,children:Object(q.jsx)(d.default,{theme:le,children:Object(q.jsx)(Z.default,{children:Object(q.jsx)(ie.Navigator,{children:r.isLoading?Object(q.jsx)(ie.Screen,{name:"Splash",component:ee,options:{header:function(){return null}}}):null==r.userToken?Object(q.jsx)(ie.Screen,{name:"SignIn",component:W,options:{header:function(){return null},animationTypeForReplace:r.isSignout?"pop":"push"}}):Object(q.jsx)(ie.Screen,{name:"Home",component:G,options:{headerTintColor:_,headerLeft:function(){return Object(q.jsx)(K.default,{source:n(293),style:{width:40,height:40,margin:5}})},headerRight:function(){return Object(q.jsx)(Y.TouchableOpacity,{onPress:function(){re("Logout","Are you sure you want to logout?",[{text:"Cancel",onPress:function(){return console.log("Cancel Pressed")},style:"cancel"},{text:"OK",onPress:function(){console.log("first"),i.signOut()}}])},children:Object(q.jsx)(j.Avatar.Icon,{size:30,icon:"logout",style:{marginLeft:10,margin:10}})})}}})})})})})}},360:function(e,t,n){e.exports=n(545)},527:function(e,t,n){e.exports=n.p+"static/media/logo1.f31eaf93.jpg"}},[[360,1,2]]]);
//# sourceMappingURL=app.0979bd8e.chunk.js.map