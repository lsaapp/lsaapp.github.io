(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{293:function(e,t,n){e.exports=n.p+"static/media/logo-transparent.2167c3eb.png"},352:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return fe}));var o=n(32),r=n.n(o),c=n(18),a=n.n(c),i=n(4),l=n.n(i),s=n(0),u=n.n(s),f=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function d(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var j=n(12),p=n(299),h=n(199),b=n(162),g=u.a.createContext({signOut:function(){},signIn:function(){},userToken:""}),O=(n(367),n(117)),v=n(200),y=n(559),m=n(2),x=n(38),S=n(109),w=n(3),T=n(320),I=n.n(T),C=n(268),k=n(209),P="https://182.93.84.51:9048/bc170/api/datahub/bz/v2.0",E="https://182.93.84.51:9048/BC170/Odatav4",A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",D={btoa:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t,o="",r=0,c=0,a=A;n.charAt(0|c)||(a="=",c%1);o+=a.charAt(63&r>>8-c%1*8)){if((e=n.charCodeAt(c+=3/4))>255)throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|e}return o},atob:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace(/[=]+$/,""),n="";if(t.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,r=0,c=0,a=0;o=t.charAt(a++);~o&&(c=r%4?64*c+o:o,r++%4)?n+=String.fromCharCode(255&c>>(-2*r&6)):0)o=A.indexOf(o);return n}},L=n(570);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(){var e=r()((function*(e,t){var n={};try{var o,r,c;if(o=e||JSON.parse(yield b.default.getItem("userToken")))n={Authorization:"Basic "+D.btoa((null==(r=o)?void 0:r.username)+":"+(null==(c=o)?void 0:c.password))}}catch(a){}return console.log(n),n=R(R({},n),{},t?{"Content-Type":"multipart/form-data",Accept:"multipart/form-data"}:{"Content-Type":"application/json"})}));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=r()((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,i=yield z(n),l={baseURL:o?E:P,url:t,method:e,headers:i,data:r,params:c,onUploadProgress:a,transformRequest:[function(e,t){return r}]};return r||delete l.data,c||delete l.params,a||delete l.onUploadProgress,Object(L.default)(l)}));return function(t,n){return e.apply(this,arguments)}}(),U="#ffffff",W="#22B516",_="#FF6B37",F="#9e9e9e",J="#f44336";function q(e){var t=e.getDate(),n=e.getMonth()+1;return e.getFullYear()+"-"+(n<=9?"0"+n:n)+"-"+(t<=9?"0"+t:t)}var G,V=n(21),H=function(){var e=Object(s.useState)([]),t=a()(e,2),n=t[0],o=t[1],c=Object(s.useState)(!1),i=a()(c,2),l=i[0],u=i[1],f=Object(s.useState)(null),d=a()(f,2),j=d[0],p=d[1],h=Object(s.useState)(""),b=a()(h,2),g=b[0],m=b[1],T=Object(s.useState)([]),P=a()(T,2),E=P[0],A=P[1],D=Object(s.useState)(!1),L=a()(D,2),N=L[0],R=L[1],z=Object(s.useState)(""),U=a()(z,2),_=U[0],J=U[1],G=Object(s.useState)([]),H=a()(G,2),$=(H[0],H[1]),M=Object(s.useState)(null),Q=a()(M,2),Y=Q[0],X=Q[1],Z=Object(s.useState)(null),ee=a()(Z,2),te=ee[0],ne=ee[1],oe=Object(s.useState)(null),re=a()(oe,2),ce=re[0],ae=re[1],ie=Object(s.useState)(new Date),le=a()(ie,2),se=le[0],ue=le[1],fe=Object(s.useState)(!1),de=a()(fe,2),je=(de[0],de[1],Object(s.useState)("")),pe=a()(je,2),he=pe[0],be=pe[1],ge=Object(s.useState)(!1),Oe=a()(ge,2),ve=Oe[0],ye=Oe[1];return Object(s.useEffect)((function(){var e=function(){var e=r()((function*(){ye(!0),B("get","/companies("+g+")/ValueEntries?$filter=locationCode eq '"+_+"' and postingDate eq "+he,null,!1).then((function(e){if(ye(!1),console.log(e),e.data.value){$(e.data.value);var t=e.data.value.filter((function(e){return"Sales Invoice"===e.documentType}));X(new Set(t.map((function(e){return e.documentNo}))).size),ne(e.data.value.reduce((function(e,t){return e+-1*t.invoicedQty}),0)),ae(e.data.value.reduce((function(e,t){return e+t.salesAmountActual}),0).toFixed(2))}else $([]),X(0),ne(0),ae(0)})).catch((function(e){console.log(e),ye(!1)}))}));return function(){return e.apply(this,arguments)}}();g&&_&&he&&e(),console.log("object",g,_,he)}),[g,_,he]),Object(s.useEffect)((function(){var e=function(){var e=r()((function*(){ye(!0),B("get","/Company('"+j+"')/locationList?$filter=Use_As_In_Transit eq false",null,!0).then((function(e){ye(!1),console.log(e),A(e.data.value.map((function(e){return{label:e.Name,value:e.Code}})))})).catch((function(e){console.log(e),ye(!1)}))}));return function(){return e.apply(this,arguments)}}();j&&e()}),[j]),Object(s.useEffect)((function(){g&&_&&(he||be(q(new Date))),console.log(g,_)}),[g,_]),Object(s.useEffect)((function(){(function(){var e=r()((function*(){ye(!0),B("get","/companies",null,!1).then((function(e){ye(!1),console.log(e),o(e.data.value.map((function(e){var t=e.id,n=e.name,o=e.displayName;return{id:t,businessProfileId:e.businessProfileId,label:o,value:n}})))})).catch((function(e){console.log(e),ye(!1)}))}));return function(){return e.apply(this,arguments)}})()()}),[]),Object(s.useEffect)((function(){var e=n.find((function(e){return e.value===j}))||{id:""};console.log(e,"company",n,j),m(null==e?void 0:e.id)}),[j]),Object(s.useEffect)((function(){be(q(se))}),[se]),Object(V.jsxs)(w.default,{children:[Object(V.jsxs)(k.Helmet,{children:[Object(V.jsx)("meta",{charSet:"utf-8",name:"title",content:"LSA"}),Object(V.jsx)("title",{children:"LSA app"})]}),Object(V.jsxs)(w.default,{style:K.filtersContainer,children:[Object(V.jsx)(C.default,{zIndex:3e3,zIndexInverse:1e3,style:K.dropDown,placeholder:"Select Company",placeholderStyle:{color:F},open:l,onOpen:function(){return R(!1)},value:j,items:n,setOpen:u,setValue:p}),Object(V.jsx)(C.default,{zIndex:2e3,zIndexInverse:2e3,style:K.dropDown,placeholder:"Select Location",placeholderStyle:{color:F},onOpen:function(){return u(!1)},open:N,value:_,items:E,setOpen:R,setValue:J}),Object(V.jsxs)(S.default,{style:{flexDirection:"row",justifyContent:"space-between",padding:5},children:[Object(V.jsx)(w.default,{style:{marginLeft:10},children:Object(V.jsx)(x.default,{style:{fontSize:12,marginBottom:5,color:F},children:"Select Date"})}),Object(V.jsx)(w.default,{style:{},children:Object(V.jsx)(I.a,{selected:se,onChange:function(e){console.log(e),ue(e)}})})]})]}),ve?Object(V.jsx)(O.default,{color:W}):null,te&&ce&&Y?Object(V.jsxs)(w.default,{style:K.contentContainer,children:[Object(V.jsxs)(v.default,{style:{marginTop:8},children:[Object(V.jsx)(v.default.Title,{title:"Sales Qty"}),Object(V.jsx)(v.default.Content,{children:Object(V.jsx)(y.default,{children:te})})]}),Object(V.jsxs)(v.default,{style:{marginTop:8},children:[Object(V.jsx)(v.default.Title,{title:"Sales Value"}),Object(V.jsx)(v.default.Content,{children:Object(V.jsxs)(y.default,{children:["NPR. ",ce]})})]}),Object(V.jsxs)(v.default,{style:{marginTop:8},children:[Object(V.jsx)(v.default.Title,{title:"Total Transactions"}),Object(V.jsx)(v.default.Content,{children:Object(V.jsxs)(y.default,{children:[" ",Y]})})]})]}):Object(V.jsx)(x.default,{style:{textAlign:"center",marginTop:50,color:F},children:"No data found"})]})},K=m.default.create({filtersContainer:{padding:15,zIndex:1e3},filterStyle:{flex:1,margin:5},dropDown:{marginBottom:10,zIndex:2,borderColor:F},contentContainer:{marginTop:30,justifyContent:"center",padding:10,zIndex:2}}),$=n(51),M=n(208),Q=n(330),Y=n(298),X=n(234);var Z=function(){var e=u.a.useState(""),t=a()(e,2),o=t[0],r=t[1],c=u.a.useState(""),i=a()(c,2),l=i[0],f=i[1],d=u.a.useState(!1),j=a()(d,2),p=j[0],h=j[1],b=u.a.useState(""),O=a()(b,2),v=O[0],y=O[1],m=u.a.useState(!1),S=a()(m,2),T=S[0],I=S[1],C=u.a.useContext(g).signIn;return Object(s.useEffect)((function(){return function(){clearTimeout(G)}}),[]),Object(V.jsxs)(Q.default,{source:n(527),blurRadius:30,style:ee.container,children:[Object(V.jsxs)(k.Helmet,{children:[Object(V.jsx)("meta",{charSet:"utf-8",name:"title",content:"LSA"}),Object(V.jsx)("title",{children:"LSA app"})]}),Object(V.jsx)(w.default,{style:ee.center,children:Object(V.jsx)($.default,{source:n(293),style:{height:180,width:180}})}),Object(V.jsxs)(w.default,{style:{marginTop:20,alignItems:"center"},children:[Object(V.jsx)(Y.default,{style:ee.loginInput,mode:"flat",label:"Username",value:o,onChangeText:function(e){return r(e)}}),Object(V.jsx)(Y.default,{style:ee.loginInput,mode:"flat",label:"Password",value:l,onChangeText:function(e){return f(e)},secureTextEntry:!p,right:Object(V.jsx)(Y.default.Icon,{name:"eye",onPress:function(){return h(!p)}})})]}),Object(V.jsxs)(w.default,{style:ee.center,children:[Object(V.jsx)(x.default,{style:{marginTop:10,color:J},children:v}),Object(V.jsx)(X.TouchableOpacity,{onPress:function(){y(""),I(!0),G=setTimeout((function(){B("get","/Company",{username:o,password:l},!0).then((function(){I(!1),C({username:o,password:l})})).catch((function(){y("Invalid username or password"),I(!1)}))}),200)},style:ee.signInButtonContainer,children:T?Object(V.jsx)(w.default,{style:ee.signInText,children:Object(V.jsx)(M.default,{color:U})}):Object(V.jsx)(x.default,{style:ee.signInText,children:"Sign In"})})]})]})},ee=m.default.create({container:{flex:1,justifyContent:"center",backgroundColor:U,padding:10},center:{justifyContent:"center",alignItems:"center"},loginInput:{marginTop:5,padding:5,width:300,height:50,borderRadius:10,backgroundColor:U},signInButtonContainer:{backgroundColor:_,justifyContent:"center",alignItems:"center",marginTop:20,borderRadius:4,width:300},signInText:{color:"white",padding:10,fontSize:18}}),te=n(567);var ne=function(){return Object(V.jsx)(w.default,{style:oe.container,children:Object(V.jsx)(x.default,{children:"Loading..."})})},oe=m.default.create({container:{flex:1}}),re=n(336),ce="web"===n(11).default.OS?function(e,t,n,o){if(window.confirm([e,t].filter(Boolean).join("\n"))){var r=n.find((function(e){return"cancel"!==e.style}));r&&r.onPress()}else{var c=n.find((function(e){return"cancel"===e.style}));c&&c.onPress()}}:re.default.alert,ae=n(560);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=Object(ae.default)(),ue=le(le({},j.DefaultTheme),{},{roundness:2,colors:le(le({},j.DefaultTheme.colors),{},{primary:W,accent:_,background:U})});function fe(){var e=s.useReducer((function(e,t){switch(t.type){case"RESTORE_TOKEN":return le(le({},e),{},{userToken:t.token,isLoading:!1});case"SIGN_IN":return le(le({},e),{},{isSignout:!1,userToken:t.token});case"SIGN_OUT":return le(le({},e),{},{isSignout:!0,userToken:null})}}),{isLoading:!0,isSignout:!1,userToken:null}),t=a()(e,2),o=t[0],c=t[1];s.useEffect((function(){(function(){var e=r()((function*(){var e;try{e=yield b.default.getItem("userToken")}catch(t){}c({type:"RESTORE_TOKEN",token:e})}));return function(){return e.apply(this,arguments)}})()()}),[]);var i=s.useMemo((function(){return{signIn:function(){var e=r()((function*(e){yield b.default.setItem("userToken",JSON.stringify(e)),c({type:"SIGN_IN",token:JSON.stringify(e)})}));return function(t){return e.apply(this,arguments)}}(),signOut:function(){var e=r()((function*(){console.log("testsss"),yield b.default.removeItem("userToken"),c({type:"SIGN_OUT"})}));return function(){return e.apply(this,arguments)}}(),userToken:o.userToken}}),[o]);return Object(V.jsx)(g.Provider,{value:i,children:Object(V.jsx)(p.default,{theme:ue,children:Object(V.jsx)(te.default,{documentTitle:{formatter:function(e,t){var n;return(null!=(n=null==e?void 0:e.title)?n:null==t?void 0:t.name)+" - LSA"}},children:Object(V.jsx)(se.Navigator,{children:o.isLoading?Object(V.jsx)(se.Screen,{name:"Splash",component:ne,options:{header:function(){return null}}}):null==o.userToken?Object(V.jsx)(se.Screen,{name:"SignIn",component:Z,options:{header:function(){return null},animationTypeForReplace:o.isSignout?"pop":"push"}}):Object(V.jsx)(se.Screen,{name:"Home",component:H,options:{headerTintColor:_,headerLeft:function(){return Object(V.jsx)($.default,{source:n(293),style:{width:40,height:40,margin:5}})},headerRight:function(){return Object(V.jsx)(X.TouchableOpacity,{onPress:function(){ce("Logout","Are you sure you want to logout?",[{text:"Cancel",onPress:function(){return console.log("Cancel Pressed")},style:"cancel"},{text:"OK",onPress:function(){console.log("first"),i.signOut()}}])},children:Object(V.jsx)(h.Avatar.Icon,{size:30,icon:"logout",style:{marginLeft:10,margin:10}})})}}})})})})})}!function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="/service-worker.js";f?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):d(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):d(t,e)}))}}()},360:function(e,t,n){e.exports=n(545)},527:function(e,t,n){e.exports=n.p+"static/media/logo1.f31eaf93.jpg"}},[[360,1,2]]]);
//# sourceMappingURL=app.576ec3fa.chunk.js.map